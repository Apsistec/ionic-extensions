{"version":3,"file":"tags-input-module.js","sources":["ng://@co.mmons/ionic-extensions/tags-input/tags-input.ts","ng://@co.mmons/ionic-extensions/tags-input/index.ts","ng://@co.mmons/ionic-extensions/tags-input/tags-input-module.ts"],"sourcesContent":["import {ChangeDetectorRef, Component, EventEmitter, forwardRef, HostBinding, HostListener, Input, Output, ViewChild} from \"@angular/core\";\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from \"@angular/forms\";\nimport {IonInput, Platform} from \"@ionic/angular\";\n\nexport const tagsValueAccessor = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => TagsInput),\n    multi: true\n};\n\n@Component({\n    selector: \"ionx-tags-input\",\n    providers: [tagsValueAccessor],\n    templateUrl: \"tags-input.html\",\n    styleUrls: [\"tags-input.scss\"]\n})\nexport class TagsInput implements ControlValueAccessor {\n\n    constructor(public plt: Platform, public ref: ChangeDetectorRef) {\n    }\n\n    @HostBinding(\"class.readonly\")\n    @Input()\n    readonly: boolean = false;\n\n    @Input()\n    hideRemove: boolean = false;\n\n    @Input()\n    maxTags: number = -1;\n\n    @Input()\n    placeholder: string = \"+Tag\";\n\n    @Input()\n    type: string = \"text\";\n\n    @Input()\n    separatorStr: string = \",\";\n\n    @Input()\n    canEnterAdd: boolean = true;\n\n    @Input()\n    canBackspaceRemove: boolean = false;\n\n    @Input()\n    verifyFn: (tagSrt: string) => boolean;\n\n    @Input()\n    sortFn: (a: string, b: string) => number;\n\n    @Input()\n    sortable: boolean;\n\n\n    _once: boolean = false;\n\n    @Input()\n    set once(value: boolean | string) {\n        if (typeof value === \"string\") {\n            this._once = true;\n        } else {\n            this._once = value;\n        }\n    }\n\n    get once(): boolean | string {\n        return this._once;\n    }\n\n\n    @Output()\n    change: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    ionFocus: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    ionBlur: EventEmitter<any> = new EventEmitter();\n\n    @ViewChild(IonInput, {static: false})\n    input: IonInput;\n\n    _editTag: string = \"\";\n    _tags: string[] = [];\n    _isFocus: boolean = false;\n    _onChanged: Function;\n    _onTouched: Function;\n\n    keyAddTag(): any {\n        const tagStr = this._editTag.trim();\n\n        if (!this.canEnterAdd) {\n            return;\n        }\n\n        if (!this.verifyTag(tagStr)) {\n            return;\n        }\n\n        if (this.once && !this.isOnce(tagStr)) {\n            this._editTag = \"\";\n            return;\n        }\n\n        this.pushTag(tagStr);\n    }\n\n    separatorStrAddTag(): any {\n\n        if (!this.separatorStr) {\n            return;\n        }\n\n        if (this._editTag.indexOf(this.separatorStr) > -1) {\n\n            const tags = this._editTag.split(this.separatorStr);\n\n            for (let i = 0; i < tags.length; i++) {\n                const tag = tags[i].trim();\n\n                if (i < tags.length - 1) {\n                    if (this.verifyTag(tag) && this.isOnce(tag)) {\n                        this.pushTag(tag);\n                    }\n\n                } else {\n                    this._editTag = tag;\n                }\n            }\n        }\n    }\n\n    keyRemoveTag(ev: Event): any {\n\n        if (!this.canBackspaceRemove) {\n            return;\n        }\n\n        if (this._editTag === \"\") {\n            this.removeTag(-1);\n            this._editTag = \"\";\n        }\n    }\n\n    btnRemoveTag($index: number): any {\n        this.removeTag($index);\n        this.input.setFocus();\n    }\n\n    verifyTag(tagStr: string): boolean {\n\n        if (typeof this.verifyFn === \"function\") {\n            if (!this.verifyFn(tagStr)) {\n                this._editTag = \"\";\n                return false;\n            } else {\n                return true;\n            }\n        }\n\n        if (!tagStr.trim()) {\n            this._editTag = \"\";\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    pushTag(tagStr: string): any {\n\n        if (!this._tags) {\n            this._tags = [];\n        }\n\n        if (this._tags.indexOf(tagStr) > -1) {\n            return;\n        }\n\n        if (this.maxTags !== -1 && this._tags.length >= this.maxTags) {\n            this._editTag = \"\";\n            return;\n        }\n\n\n        this._tags.push(tagStr.trim());\n        this.sortTags();\n\n        this.ref.detectChanges();\n        this.change.emit(this._tags.slice());\n        this._editTag = \"\";\n\n        if (this._onChanged) {\n            this._onChanged(this._tags.slice());\n        }\n    }\n\n    private sortTags() {\n        if (this.sortable && this._tags) {\n            if (this.sortFn) {\n                this._tags.sort((a, b) => this.sortFn(a, b));\n            } else {\n                this._tags.sort((a, b) => a.localeCompare(b));\n            }\n        }\n    }\n\n    removeTag($index: number): any {\n        if (this._tags && this._tags.length > 0) {\n            if ($index === -1) {\n                this._tags.pop();\n                this.change.emit(this._tags);\n            } else if ($index > -1) {\n                this._tags.splice($index, 1);\n                this.change.emit(this._tags);\n            }\n\n            if (this._onChanged) {\n                this._onChanged(this._tags.slice());\n            }\n        }\n    }\n\n    isOnce(tagStr: string): boolean {\n        const tags: string[] = this._tags;\n\n        if (!tags) {\n            return true;\n        }\n\n        return tags.every((e: string): boolean => {\n            return e !== tagStr;\n        });\n    }\n\n    @HostListener(\"click\", [\"$event\"])\n    _click(ev: UIEvent): any {\n        if (!this._isFocus) {\n\n        }\n        this.focus();\n        ev.preventDefault();\n        ev.stopPropagation();\n    }\n\n    public blur() {\n\n        if (this._editTag) {\n            this.pushTag(this._editTag);\n        }\n\n        if (this._isFocus) {\n            this._isFocus = false;\n            this.ionBlur.emit(this._tags);\n        }\n    }\n\n    public focus(): any {\n        if (!this._isFocus) {\n            this._isFocus = true;\n\n            if (this.input) {\n                this.input.setFocus();\n            }\n\n            this.ionFocus.emit(this._tags);\n        }\n    }\n\n    writeValue(val: any): void {\n        this._tags = val;\n    }\n\n    registerOnChange(fn: any): void {\n        this._onChanged = fn;\n    }\n\n    registerOnTouched(fn: any): void {\n        this._onTouched = fn;\n    }\n\n    setValue(val: any): any {\n        this._tags = val;\n        this.sortTags();\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {FormsModule, ReactiveFormsModule} from \"@angular/forms\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {TagsInput} from \"./tags-input\";\n\nexport {TagsInput} from \"./tags-input\";\n\n@NgModule({\n    declarations: [TagsInput],\n    exports: [TagsInput],\n    imports: [CommonModule, IonicModule, IntlModule, FormsModule, ReactiveFormsModule],\n    entryComponents: [TagsInput]\n})\nexport class TagsInputModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {tagsValueAccessor as Éµa} from './tags-input';"],"names":[],"mappings":"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"}