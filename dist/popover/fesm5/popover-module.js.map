{"version":3,"file":"popover-module.js","sources":["ng://@co.mmons/ionic-extensions/popover/popover-controller.ts","ng://@co.mmons/ionic-extensions/popover/index.ts","ng://@co.mmons/ionic-extensions/popover/popover-module.ts"],"sourcesContent":["import {Component, TemplateRef, Input, ViewChild, EventEmitter, Output, ViewEncapsulation} from \"@angular/core\";\nimport {PopoverController} from \"@ionic/angular\";\n\n@Component({\n    selector: \"ionx-popover-controller\",\n    encapsulation: ViewEncapsulation.None,\n    template: `\n        <ng-template #popoverContent>\n            <ng-content></ng-content>\n        </ng-template>\n    `\n})\nexport class PopoverControllerComponent {\n\n    constructor(private controller: PopoverController) {\n    }\n\n    @Input()\n    private cssClass: string;\n\n    @Input()\n    private enableBackdropDismiss: boolean;\n\n    @Input()\n    private showBackdrop: boolean;\n\n    @ViewChild(\"popoverContent\", {static: true})\n    private content: TemplateRef<any>;\n\n    @Output()\n    public readonly willEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didDismiss: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly willDismiss: EventEmitter<any> = new EventEmitter();\n\n    private popover: HTMLIonPopoverElement;\n\n    public async present(event?: Event) {\n\n        // already opened - should we close existing and open new?\n        if (this.popover) {\n            return;\n        }\n        \n        this.popover = (await this.controller.create({component: PopoverControllerContentComponent, componentProps: {template: this.content}, backdropDismiss: this.enableBackdropDismiss, showBackdrop: this.showBackdrop, cssClass: this.cssClass, event: event}));\n\n        this.willEnter.next();\n\n        await this.popover.present();\n\n        this.didEnter.next();\n\n        this._presented = true;\n\n        if (await this.popover.onWillDismiss()) {\n            this.willDismiss.next();\n        }\n\n        this._dismissing = true;\n        if (await this.popover.onDidDismiss()) {\n            this.didDismiss.next();\n            this.popover = undefined;\n            this._presented = false;\n            this._dismissing = false;\n        }\n    }\n\n    private _dismissing: boolean = false;\n\n    public get dismissing(): boolean {\n        return this._dismissing;\n    }\n\n    private _presented: boolean = false;\n\n    public get presented() {\n        return this._presented;\n    }\n\n    public dismiss(data?: any, role?: any): Promise<any> {\n\n        if (this.popover) {\n            return this.popover.dismiss(data, role);\n        }\n\n        return new Promise((resolve, reject) => {\n            resolve();\n        });\n    }\n\n}\n\n@Component({\n    encapsulation: ViewEncapsulation.None,\n    template: `\n        <ng-template [ngTemplateOutlet]=\"template\"></ng-template>\n    `\n})\nexport class PopoverControllerContentComponent {\n\n    constructor() {\n        //this.template = params.get(\"template\");\n    }\n\n    @Input()\n    template: TemplateRef<any>;\n\n    ngOnDestroy() {\n        this.template = undefined;\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {PopoverControllerComponent, PopoverControllerContentComponent} from \"./popover-controller\";\n\nexport {PopoverControllerComponent} from \"./popover-controller\";\n\n@NgModule({\n    declarations: [PopoverControllerComponent, PopoverControllerContentComponent],\n    exports: [PopoverControllerComponent],\n    imports: [IonicModule, CommonModule],\n    entryComponents: [PopoverControllerComponent, PopoverControllerContentComponent]\n})\nexport class PopoverModule {\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {PopoverControllerContentComponent as Éµa} from './popover-controller';"],"names":["tslib_1.__decorate"],"mappings":"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"}