{"version":3,"file":"popover-module.js","sources":["ng://@co.mmons/ionic-extensions/popover/popover-controller.ts","ng://@co.mmons/ionic-extensions/popover/index.ts","ng://@co.mmons/ionic-extensions/popover/popover-module.ts"],"sourcesContent":["import {Component, TemplateRef, Input, ViewChild, EventEmitter, Output, ViewEncapsulation} from \"@angular/core\";\nimport {PopoverController} from \"@ionic/angular\";\n\n@Component({\n    selector: \"ionx-popover-controller\",\n    encapsulation: ViewEncapsulation.None,\n    template: `\n        <ng-template #popoverContent>\n            <ng-content></ng-content>\n        </ng-template>\n    `\n})\nexport class PopoverControllerComponent {\n\n    constructor(private controller: PopoverController) {\n    }\n\n    @Input()\n    private cssClass: string;\n\n    @Input()\n    private enableBackdropDismiss: boolean;\n\n    @Input()\n    private showBackdrop: boolean;\n\n    @ViewChild(\"popoverContent\", {static: true})\n    private content: TemplateRef<any>;\n\n    @Output()\n    public readonly willEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didDismiss: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly willDismiss: EventEmitter<any> = new EventEmitter();\n\n    private popover: HTMLIonPopoverElement;\n\n    public async present(event?: Event) {\n\n        // already opened - should we close existing and open new?\n        if (this.popover) {\n            return;\n        }\n        \n        this.popover = (await this.controller.create({component: PopoverControllerContentComponent, componentProps: {template: this.content}, backdropDismiss: this.enableBackdropDismiss, showBackdrop: this.showBackdrop, cssClass: this.cssClass, event: event}));\n\n        this.willEnter.next();\n\n        await this.popover.present();\n\n        this.didEnter.next();\n\n        this._presented = true;\n\n        if (await this.popover.onWillDismiss()) {\n            this.willDismiss.next();\n        }\n\n        this._dismissing = true;\n        if (await this.popover.onDidDismiss()) {\n            this.didDismiss.next();\n            this.popover = undefined;\n            this._presented = false;\n            this._dismissing = false;\n        }\n    }\n\n    private _dismissing: boolean = false;\n\n    public get dismissing(): boolean {\n        return this._dismissing;\n    }\n\n    private _presented: boolean = false;\n\n    public get presented() {\n        return this._presented;\n    }\n\n    public dismiss(data?: any, role?: any): Promise<any> {\n\n        if (this.popover) {\n            return this.popover.dismiss(data, role);\n        }\n\n        return new Promise((resolve, reject) => {\n            resolve();\n        });\n    }\n\n}\n\n@Component({\n    encapsulation: ViewEncapsulation.None,\n    template: `\n        <ng-template [ngTemplateOutlet]=\"template\"></ng-template>\n    `\n})\nexport class PopoverControllerContentComponent {\n\n    constructor() {\n        //this.template = params.get(\"template\");\n    }\n\n    @Input()\n    template: TemplateRef<any>;\n\n    ngOnDestroy() {\n        this.template = undefined;\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {PopoverControllerComponent, PopoverControllerContentComponent} from \"./popover-controller\";\n\nexport {PopoverControllerComponent} from \"./popover-controller\";\n\n@NgModule({\n    declarations: [PopoverControllerComponent, PopoverControllerContentComponent],\n    exports: [PopoverControllerComponent],\n    imports: [IonicModule, CommonModule],\n    entryComponents: [PopoverControllerComponent, PopoverControllerContentComponent]\n})\nexport class PopoverModule {\n}","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {PopoverControllerContentComponent as Éµa} from './popover-controller';"],"names":[],"mappings":"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"}