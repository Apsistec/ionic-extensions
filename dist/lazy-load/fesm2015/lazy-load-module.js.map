{"version":3,"file":"lazy-load-module.js","sources":["ng://@co.mmons/ionic-extensions/lazy-load/lazy-load.ts","ng://@co.mmons/ionic-extensions/lazy-load/lazy-directives.ts","ng://@co.mmons/ionic-extensions/lazy-load/index.ts","ng://@co.mmons/ionic-extensions/lazy-load/lazy-load-module.ts"],"sourcesContent":["import {LazyLoadOptions} from \"./lazy-load-options\";\n\nconst defaultOptions: LazyLoadOptions = {\n    selector: \"img\",\n    container: window,\n    scroll: null,\n    threshold: 300,\n    throttle: 150,\n    dataSrc: \"original\",\n    dataSrcSet: \"original-set\",\n    dataAlternate: \"alternate\",\n    classLoading: \"ionx-lazy-image-loading\",\n    classLoaded: \"ionx-lazy-image-loaded\",\n    skipInvisible: true,\n    callbackLoad: null,\n    callbackError: null,\n    callbackSet: null,\n    callbackProcessed: null\n};\n\nfunction _isInsideViewport(element, container, threshold) {\n\n    var ownerDocument, documentTop, documentLeft;\n\n    function _getDocumentWidth() {\n        return window.innerWidth || (ownerDocument.documentElement.clientWidth || document.body.clientWidth);\n    }\n\n    function _getDocumentHeight() {\n        return window.innerHeight || (ownerDocument.documentElement.clientHeight || document.body.clientHeight);\n    }\n\n    function _getTopOffset(element) {\n        return element.getBoundingClientRect().top + documentTop - ownerDocument.documentElement.clientTop;\n    }\n\n    function _getLeftOffset(element) {\n        return element.getBoundingClientRect().left + documentLeft - ownerDocument.documentElement.clientLeft;\n    }\n\n    function _isBelowViewport() {\n        var fold;\n        if (container === window) {\n            fold = _getDocumentHeight() + documentTop;\n        } else {\n            fold = _getTopOffset(container) + container.offsetHeight;\n        }\n        return fold <= _getTopOffset(element) - threshold;\n    }\n\n    function _isAtRightOfViewport() {\n        var fold;\n        if (container === window) {\n            fold = _getDocumentWidth() + window.pageXOffset;\n        } else {\n            fold = _getLeftOffset(container) + _getDocumentWidth();\n        }\n        return fold <= _getLeftOffset(element) - threshold;\n    }\n\n    function _isAboveViewport() {\n        var fold;\n        if (container === window) {\n            fold = documentTop;\n        } else {\n            fold = _getTopOffset(container);\n        }\n        return fold >= _getTopOffset(element) + threshold + element.offsetHeight;\n    }\n\n    function _isAtLeftOfViewport() {\n        var fold;\n        if (container === window) {\n            fold = documentLeft;\n        } else {\n            fold = _getLeftOffset(container);\n        }\n        return fold >= _getLeftOffset(element) + threshold + element.offsetWidth;\n    }\n\n    ownerDocument = element.ownerDocument;\n    documentTop = window.pageYOffset || ownerDocument.body.scrollTop;\n    documentLeft = window.pageXOffset || ownerDocument.body.scrollLeft;\n\n    return !_isBelowViewport() && !_isAboveViewport() && !_isAtRightOfViewport() && !_isAtLeftOfViewport();\n}\n\nfunction _now() {\n    var d = new Date();\n    return d.getTime();\n}\n\n\nfunction _convertToArray(nodeSet) {\n    return Array.prototype.slice.call(nodeSet);\n}\n\nfunction setSourcesForPicture(element, srcsetDataAttribute) {\n\n    let parent = element.parentElement;\n    if (parent.tagName !== 'PICTURE') {\n        return;\n    }\n\n    for (let i = 0; i < parent.children.length; i++) {\n        let pictureChild = parent.children[i];\n        if (pictureChild.tagName === 'SOURCE') {\n            let sourceSrcset = pictureChild.getAttribute('data-' + srcsetDataAttribute);\n            if (sourceSrcset) {\n                pictureChild.setAttribute('srcset', sourceSrcset);\n            }\n        }\n    }\n}\n\n/**\n * Sets sources (e.g. src) for lazy load element.\n * @param element Element, whose image to be loaded.\n * @param srcsetDataAttribute \n * @param srcDataAttribute \n */\nfunction setSources(element, srcsetDataAttribute, srcDataAttribute) {\n\n    let tagName = element.tagName.toUpperCase();\n    let elementSrc = element.getAttribute(\"data-\" + srcDataAttribute);\n    \n    if (tagName === \"IFRAME\" || tagName === \"VIDEO\") {\n        \n        if (elementSrc) {\n            element.setAttribute(\"src\", elementSrc);\n        }\n\n        return;\n\n    } else {\n        \n        if (tagName === \"IMG\") {\n            setSourcesForPicture(element, srcsetDataAttribute);\n        }\n\n        let dataTarget = element;\n        if (element[\"__ionxLazyLoadTmpImg\"]) {\n            dataTarget = element[\"__ionxLazyLoadTmpImg\"];\n        }\n\n        let imgSrcSet = element.getAttribute(\"data-\" + srcsetDataAttribute);\n        if (imgSrcSet) {\n            dataTarget.setAttribute(\"srcset\", imgSrcSet);\n        }\n\n        if (elementSrc) {\n            dataTarget.setAttribute(\"src\", elementSrc);\n        }\n\n        return;\n    }\n    //if (elementSrc) element.style.backgroundImage = \"url(\" + elementSrc + \")\";\n}\n\nfunction _bind(fn, obj) {\n    return function () {\n        return fn.apply(obj, arguments);\n    };\n}\n\nvar instanceCounter = 0;\nvar instances: {[instanceId: string]: Loader} = {};\n\n\nexport class Loader {\n\n    constructor(options?: LazyLoadOptions) {\n\n        this.id = (++instanceCounter) + \"\";\n        instances[this.id] = this;\n\n        this._options = Object.assign({}, defaultOptions, options);\n        this._queryOriginNode = this._options.container === window ? document : <HTMLElement|Document>this._options.container;\n\n        this._previousLoopTime = 0;\n        this._loopTimeout = null;\n\n        this._handleScrollFn = _bind(this.handleScroll, this);\n\n        window.addEventListener(\"resize\", this._handleScrollFn);\n        this.update();\n    }\n\n    private id: string;\n\n    private _options: LazyLoadOptions;\n\n    private _queryOriginNode: HTMLElement | Document;\n\n    private _previousLoopTime: number;\n\n    private _loopTimeout: any;\n\n    private _handleScrollFn: any;\n\n    private _elements: Array<HTMLElement & ExtendedHtmlElement>;\n\n\n    get container(): HTMLElement | Document {\n        return this._queryOriginNode;\n    }\n\n\n    private _showOnAppear(element: HTMLElement & ExtendedHtmlElement) {\n\n        let errorCallback = () => {\n\n            let eventTarget = element;\n\n            if (element[\"__ionxLazyLoadTmpImg\"]) {\n                eventTarget = element[\"__ionxLazyLoadTmpImg\"];\n            }\n\n            let alternate = this._options && this._options.dataAlternate && element.getAttribute(\"data-\" + this._options.dataAlternate);\n            if (alternate && eventTarget[\"src\"] != alternate) {\n                eventTarget[\"src\"] = alternate;\n                return;\n            }\n\n            delete element[\"__ionxLazyLoadTmpImg\"];\n\n            eventTarget.removeEventListener(\"load\", loadCallback);\n            eventTarget.removeEventListener(\"error\", errorCallback);\n\n            element.lazyLoadError = true;\n\n            if (this._options) {\n                element.classList.remove(this._options.classLoading);\n\n                if (this._options.callbackError) {\n                    this._options.callbackError.callback_error(element);\n                }\n            }\n        }\n\n        let loadCallback = () => {\n\n            /* As this method is asynchronous, it must be protected against external destroy() calls */\n            if (this._options === null || this._options === undefined) {\n                return;\n            }\n            \n            let eventTarget: any = element;\n            \n            // if target element is not <img>, the real target of onload callback is temporary image\n            if (element[\"__ionxLazyLoadTmpImg\"]) {\n                eventTarget = element[\"__ionxLazyLoadTmpImg\"];\n                element.style.backgroundImage = `url(${eventTarget.src})`;\n                delete element[\"__ionxLazyLoadTmpImg\"];\n            }\n\n            element.lazyLoadError = false;\n\n            if (this._options) {\n                if (this._options.callbackLoad) {\n                    this._options.callbackLoad(element);\n                }\n\n                element.classList.remove(this._options.classLoading);\n                element.classList.add(this._options.classLoaded);\n            }\n\n            eventTarget.removeEventListener(\"load\", loadCallback);\n            eventTarget.removeEventListener(\"error\", errorCallback);\n        }\n\n        if (this._options) {\n            element.classList.add(this._options.classLoading);\n        }\n\n        if (element.tagName.toUpperCase() === \"IMG\" || element.tagName.toUpperCase() === \"IFRAME\") {\n            element.addEventListener(\"load\", loadCallback);\n            element.addEventListener(\"error\", errorCallback);\n        } else if (element.tagName.toUpperCase() === \"VIDEO\") {\n            element.addEventListener(\"loadedmetadata\", loadCallback);\n            element.addEventListener(\"error\", errorCallback);\n        } else {\n            let tmpImg = new Image();\n            tmpImg.addEventListener(\"load\", loadCallback);\n            tmpImg.addEventListener(\"error\", errorCallback);\n            element[\"__ionxLazyLoadTmpImg\"] = tmpImg;\n        }\n\n        if (this._options) {\n            setSources(element, this._options.dataSrcSet, this._options.dataSrc);\n\n            if (this._options.callbackSet) {\n                this._options.callbackSet(element);\n            }\n        }\n    }\n\n    private _loopThroughElements() {\n\n        let elementsLength = (!this._elements) ? 0 : this._elements.length;\n        let processedIndexes = [];\n\n        for (let i = 0; i < elementsLength; i++) {\n            let element = this._elements[i];\n\n            /* If must skip_invisible and element is invisible, skip it */\n            // if (this._options.skipInvisible && (element.offsetParent === null)) {\n            //     continue;\n            // }\n\n            if (_isInsideViewport(element, this._options.container, this._options.threshold)) {\n                this._showOnAppear(element);\n\n                /* Marking the element as processed. */\n                processedIndexes.push(i);\n                element.lazyLoadProcessed = true;\n            }\n        }\n\n        /* Removing processed elements from this._elements. */\n        while (processedIndexes.length > 0) {\n            this._elements.splice(processedIndexes.pop(), 1);\n\n            if (this._options.callbackProcessed) {\n                this._options.callbackProcessed(this._elements.length);\n            }\n        }\n\n        /* Stop listening to scroll event when 0 elements remains */\n        if (elementsLength === 0) {\n            this._stopScrollHandler();\n        }\n    };\n\n    private _purgeElements() {\n        let elementsToPurge = [];\n\n        for (let i = 0; i < this._elements.length; i++) {\n            let element = this._elements[i];\n\n            /* If the element has already been processed, skip it */\n            if (element.lazyLoadProcessed) {\n                elementsToPurge.push(i);\n            }\n        }\n\n        /* Removing elements to purge from this._elements. */\n        while (elementsToPurge.length > 0) {\n            this._elements.splice(elementsToPurge.pop(), 1);\n        }\n    };\n\n    private _isHandlingScroll: boolean;\n\n    private _startScrollHandler() {\n        if (!this._isHandlingScroll) {\n            this._isHandlingScroll = true;\n            this._options.container.addEventListener(\"scroll\", this._handleScrollFn);\n            if (this._options.scroll) {\n                this._options.scroll.addEventListener(\"scroll\", this._handleScrollFn);\n            }\n        }\n    };\n\n    private _stopScrollHandler() {\n        if (this._isHandlingScroll) {\n            this._isHandlingScroll = false;\n            this._options.container.removeEventListener(\"scroll\", this._handleScrollFn);\n            if (this._options.scroll) {\n                this._options.scroll.removeEventListener(\"scroll\", this._handleScrollFn);\n            }\n        }\n    };\n\n\n    public handleScroll() {\n        var remainingTime,\n            now,\n            throttle;\n\n        // IE8 fix for destroy() malfunctioning\n        if (!this._options) {\n            return;\n        }\n\n        now = _now();\n        throttle = this._options.throttle;\n\n        if (throttle !== 0) {\n            remainingTime = throttle - (now - this._previousLoopTime);\n            if (remainingTime <= 0 || remainingTime > throttle) {\n                if (this._loopTimeout) {\n                    clearTimeout(this._loopTimeout);\n                    this._loopTimeout = null;\n                }\n                this._previousLoopTime = now;\n                this._loopThroughElements();\n            } else if (!this._loopTimeout) {\n                this._loopTimeout = setTimeout(_bind(function () {\n                    this._previousLoopTime = _now();\n                    this._loopTimeout = null;\n                    this._loopThroughElements();\n                }, this), remainingTime);\n            }\n        } else {\n            this._loopThroughElements();\n        }\n    };\n\n    public update(options?: {retryError?: boolean}) {\n\n        this._elements = _convertToArray(this._queryOriginNode.querySelectorAll(this._options.selector));\n        if (options && options.retryError) {\n            for (let element of this._elements) {\n                if (element.lazyLoadProcessed && element.lazyLoadError) {\n                    element.lazyLoadProcessed = false;\n                }\n            }\n        }\n\n        this._purgeElements();\n        this._loopThroughElements();\n        this._startScrollHandler();\n    }\n\n    public destroy() {\n        window.removeEventListener(\"resize\", this._handleScrollFn);\n        if (this._loopTimeout) {\n            clearTimeout(this._loopTimeout);\n            this._loopTimeout = null;\n        }\n        this._stopScrollHandler();\n        this._elements = null;\n        this._queryOriginNode = null;\n        this._options = null;\n        \n        delete instances[this.id];\n    }\n\n}\n\nexport async function ensureLazyLoad(root: HTMLElement, options?: {retryError?: boolean}) {\n\n    for (let instanceId in instances) {\n        let loader: Loader = instances[instanceId];\n        let container = loader.container;\n\n        if (root === container) {\n            loader.update({retryError: options && options.retryError});\n        } else {\n\n            let parent = container.parentElement;\n            while (parent && parent !== root) {\n                parent = parent.parentElement;\n            }\n\n            if (parent) {\n                loader.update({retryError: options && options.retryError});\n            }\n        }\n    }\n}\n\n\ninterface ExtendedHtmlElement {\n    lazyLoadProcessed?: boolean;\n    lazyLoadError?: boolean;\n}\n","import {ContentChildren, Directive, ElementRef, forwardRef, Inject, Input, Optional, QueryList, Renderer2} from \"@angular/core\";\nimport {sleep} from \"@co.mmons/js-utils/core\";\nimport {Loader} from \"./lazy-load\";\nimport {LazyLoadOptions} from \"./lazy-load-options\";\n\n@Directive({\n\tselector: \"[ionx-lazy-load-container]\"\n})\nexport class LazyLoadContainer {\n\n\tconstructor(private element: ElementRef<HTMLElement>) {\n\t}\n\n\tprivate loader: Loader;\n\n\trevalidate() {\n\n\t\tif (this.loader) {\n\n\t\t\tthis.loader.update();\n\n\t\t\tlet rect = this.element.nativeElement.getBoundingClientRect();\n\t\t\tif (rect.width == 0 || rect.height == 0) {\n\t\t\t\t//setTimeout(() => this.revalidate(), 200);\n\t\t\t}\n\t\t\t//console.log(this.children);\n\n\t\t\t//window.dispatchEvent(new Event(\"resize\"));\n\t\t}\n\t}\n\n\t@ContentChildren(forwardRef(() => LazyDirectives), {descendants: true})\n\tchildren: QueryList<LazyDirectives>;\n\n\tngOnInit() {\n\t\tthis.init();\n\t}\n\n\tngAfterContentInit() {\n\t\tthis.children.changes.subscribe(() => this.revalidate());\n\t\tif (this.children.length > 0) {\n\t\t\tthis.revalidate();\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.loader) {\n\t\t\tthis.loader.destroy();\n\t\t}\n\t}\n\n\tprivate async init() {\n\n\t\tconst options: LazyLoadOptions = {};\n\t\toptions.selector = \".ionx-lazy-load\";\n\t\toptions.container = this.element.nativeElement;\n\n\t\tif (this.element.nativeElement.tagName.toLowerCase() === \"ion-content\") {\n\n\t\t\tfor (let i = 0; i < 40; i++) {\n\t\t\t\toptions.scroll = this.element.nativeElement.shadowRoot && this.element.nativeElement.shadowRoot.querySelector(\".inner-scroll\");\n\n\t\t\t\tif (!options.scroll) {\n\t\t\t\t\tawait sleep(50);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.loader = new Loader(options);\n\t}\n\n}\n\n@Directive({\n\tselector: \"[ionx-lazy-load]\"\n})\nexport class LazyDirectives {\n\n\tconstructor(public element: ElementRef, private renderer: Renderer2, @Optional() @Inject(forwardRef(() => LazyLoadContainer)) private container?: LazyLoadContainer) {\n\t}\n\n\t@ContentChildren(LazyDirectives, {descendants: true})\n\tchildren: QueryList<LazyDirectives>;\n\n\tprivate _src: string;\n\n\tprivate _alternate: string;\n\n\t@Input(\"ionx-lazy-load\")\n\tpublic set src(value: string) {\n\t\tthis._src = value;\n\t\tthis.reset();\n\t}\n\n\t@Input(\"ionx-lazy-load-alternate\")\n\tpublic set alternate(value: string) {\n\t\tthis._alternate = value;\n\t\tthis.reset();\n\t}\n\n\tprivate reset() {\n\n\t\tif (this._src) {\n\t\t\tthis.renderer.addClass(this.element.nativeElement, \"ionx-lazy-load\");\n\t\t\tthis.renderer.setAttribute(this.element.nativeElement, \"data-original\", this._src);\n\t\t}\n\n\t\tif (this._alternate) {\n\t\t\tthis.renderer.setAttribute(this.element.nativeElement, \"data-alternate\", this._alternate);\n\t\t}\n\t}\n\n\tprivate revalidate() {\n\n\t\t// children.length > 1 because this is also included in children query\n\t\tif (this.container && this.children.length > 1) {\n\t\t\tthis.container.revalidate();\n\t\t}\n\t}\n\n\tngAfterContentInit() {\n\t\tthis.children.changes.subscribe(() => this.revalidate());\n\t\tthis.revalidate();\n\t}\n\n}\n","import {NgModule} from \"@angular/core\";\nimport {LazyDirectives, LazyLoadContainer} from \"./lazy-directives\";\n\nexport {LazyDirectives, LazyLoadContainer} from \"./lazy-directives\";\nexport {ensureLazyLoad} from \"./lazy-load\";\n\n@NgModule({\n    declarations: [LazyDirectives, LazyLoadContainer],\n    exports: [LazyDirectives, LazyLoadContainer]\n})\nexport class LazyLoadModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}