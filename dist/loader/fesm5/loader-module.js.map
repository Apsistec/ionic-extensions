{"version":3,"file":"loader-module.js","sources":["ng://@co.mmons/ionic-extensions/loader/loader.ts","ng://@co.mmons/ionic-extensions/loader/loader-controller.ts","ng://@co.mmons/ionic-extensions/loader/index.ts","ng://@co.mmons/ionic-extensions/loader/loader-module.ts"],"sourcesContent":["import {Component, ElementRef, Input, OnDestroy, OnInit} from \"@angular/core\";\nimport {LoaderOptions} from \"./loader-options\";\n\n@Component({\n    selector: \"ionx-loader\",\n    templateUrl: \"loader.html\",\n    styles: [\n        `:host { display: block }`\n    ]\n})\nexport class Loader implements OnInit, OnDestroy, LoaderOptions {\n\n    constructor(private elementRef: ElementRef<HTMLElement>) {\n    }\n\n    @Input()\n    instanceCallback: (loader: Loader) => void;\n\n    @Input()\n    header: string;\n\n    @Input()\n    message: string;\n\n    @Input()\n    mode: \"spinner\" | \"progress\";\n\n    @Input()\n    progressMessage: string;\n\n    @Input()\n    progressType: \"determinate\" | \"indeterminate\" = \"determinate\";\n\n    @Input()\n    progressValue: number = 0;\n\n    @Input()\n    progressBuffer: number = 0;\n\n    @Input()\n    progressPercent: number;\n\n    get progressPercentVisible() {\n        return typeof this.progressPercent === \"number\";\n    }\n\n    get spinnerMode() {\n        return this.mode === \"spinner\";\n    }\n\n    get progressMode() {\n        return this.mode === \"progress\";\n    }\n\n    dismiss() {\n        return this.popover.dismiss();\n    }\n\n    private popover: HTMLIonPopoverElement;\n\n    ngOnInit() {\n        this.popover = this.elementRef.nativeElement.closest(\"ion-popover\");\n\n        if (this.instanceCallback) {\n            this.instanceCallback(this);\n        }\n    }\n\n    ngOnDestroy() {\n        this.popover = undefined;\n        this.instanceCallback = undefined;\n    }\n}\n","import {Injectable} from \"@angular/core\";\nimport {waitTill} from \"@co.mmons/js-utils/core\";\nimport {PopoverController} from \"@ionic/angular\";\nimport {Loader} from \"./loader\";\nimport {LoaderOptions} from \"./loader-options\";\n\n@Injectable()\nexport class LoaderController {\n\n    constructor(protected popoverController: PopoverController) {\n    }\n\n    async present(options: LoaderOptions) {\n\n        let loader: Loader;\n\n        const loaderInstance = (instance: Loader) => loader = instance;\n\n        const popover = await this.popoverController.create({\n            animated: false,\n            cssClass: \"ionx-popover-flex\",\n            backdropDismiss: false,\n            keyboardClose: false,\n            component: Loader,\n            componentProps: Object.assign({}, options, {\n                instanceCallback: (loader: Loader) => loaderInstance(loader)\n            })\n        });\n\n        // popover.style.setProperty(\"--width\", \"100%\");\n        // popover.style.setProperty(\"--maxHeight\", \"100%\");\n\n        // const content = popover.querySelector(\".popover-content\") as HTMLElement;\n        // content.style.background = \"transparent\";\n        // content.style.borderRadius = \"0px\";\n        // content.style.left = \"0px !important\";\n        // content.style.top = \"0px !important\";\n        // content.style.height = \"100%\";\n        // content.style.width = \"100%\";\n        // content.style.maxWidth = \"none\";\n        // content.style.maxHeight = \"none\";\n        // content.style.boxShadow = \"none\";\n\n        popover.present();\n\n        await waitTill(() => !!loader);\n\n        return loader;\n    }\n\n}\n\n\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {LoaderController} from \"./loader-controller\";\nimport {Loader} from \"./loader\";\n\nexport {Loader} from \"./loader\";\nexport {LoaderController} from \"./loader-controller\";\nexport {LoaderOptions} from \"./loader-options\";\n\n@NgModule({\n    declarations: [Loader],\n    imports: [IntlModule, IonicModule, CommonModule],\n    entryComponents: [Loader],\n    providers: [LoaderController]\n})\nexport class LoaderModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["tslib_1.__decorate"],"mappings":"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"}