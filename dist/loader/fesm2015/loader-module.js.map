{"version":3,"file":"loader-module.js","sources":["ng://@co.mmons/ionic-extensions/loader/loader.ts","ng://@co.mmons/ionic-extensions/loader/loader-controller.ts","ng://@co.mmons/ionic-extensions/loader/index.ts","ng://@co.mmons/ionic-extensions/loader/loader-module.ts"],"sourcesContent":["import {Component, ElementRef, Input, OnDestroy, OnInit} from \"@angular/core\";\nimport {LoaderOptions} from \"./loader-options\";\n\n@Component({\n    selector: \"ionx-loader\",\n    templateUrl: \"loader.html\",\n    styles: [\n        `:host { display: block }`\n    ]\n})\nexport class Loader implements OnInit, OnDestroy, LoaderOptions {\n\n    constructor(private elementRef: ElementRef<HTMLElement>) {\n    }\n\n    @Input()\n    instanceCallback: (loader: Loader) => void;\n\n    @Input()\n    header: string;\n\n    @Input()\n    message: string;\n\n    @Input()\n    mode: \"spinner\" | \"progress\";\n\n    @Input()\n    progressMessage: string;\n\n    @Input()\n    progressType: \"determinate\" | \"indeterminate\" = \"determinate\";\n\n    @Input()\n    progressValue: number = 0;\n\n    @Input()\n    progressBuffer: number = 0;\n\n    @Input()\n    progressPercent: number;\n\n    get progressPercentVisible() {\n        return typeof this.progressPercent === \"number\";\n    }\n\n    get spinnerMode() {\n        return this.mode === \"spinner\";\n    }\n\n    get progressMode() {\n        return this.mode === \"progress\";\n    }\n\n    dismiss() {\n        return this.popover.dismiss();\n    }\n\n    private popover: HTMLIonPopoverElement;\n\n    ngOnInit() {\n        this.popover = this.elementRef.nativeElement.closest(\"ion-popover\");\n\n        if (this.instanceCallback) {\n            this.instanceCallback(this);\n        }\n    }\n\n    ngOnDestroy() {\n        this.popover = undefined;\n        this.instanceCallback = undefined;\n    }\n}\n","import {Injectable} from \"@angular/core\";\nimport {waitTill} from \"@co.mmons/js-utils/core\";\nimport {PopoverController} from \"@ionic/angular\";\nimport {Loader} from \"./loader\";\nimport {LoaderOptions} from \"./loader-options\";\n\n@Injectable()\nexport class LoaderController {\n\n    constructor(protected popoverController: PopoverController) {\n    }\n\n    async present(options: LoaderOptions) {\n\n        let loader: Loader;\n\n        const loaderInstance = (instance: Loader) => loader = instance;\n\n        const popover = await this.popoverController.create({\n            animated: false,\n            cssClass: \"ionx-popover-flex\",\n            backdropDismiss: false,\n            keyboardClose: false,\n            component: Loader,\n            componentProps: Object.assign({mode: \"spinner\"}, options, {\n                instanceCallback: (loader: Loader) => loaderInstance(loader)\n            })\n        });\n\n        // popover.style.setProperty(\"--width\", \"100%\");\n        // popover.style.setProperty(\"--maxHeight\", \"100%\");\n\n        // const content = popover.querySelector(\".popover-content\") as HTMLElement;\n        // content.style.background = \"transparent\";\n        // content.style.borderRadius = \"0px\";\n        // content.style.left = \"0px !important\";\n        // content.style.top = \"0px !important\";\n        // content.style.height = \"100%\";\n        // content.style.width = \"100%\";\n        // content.style.maxWidth = \"none\";\n        // content.style.maxHeight = \"none\";\n        // content.style.boxShadow = \"none\";\n\n        popover.present();\n\n        await waitTill(() => !!loader);\n\n        return loader;\n    }\n\n}\n\n\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {LoaderController} from \"./loader-controller\";\nimport {Loader} from \"./loader\";\n\nexport {Loader} from \"./loader\";\nexport {LoaderController} from \"./loader-controller\";\nexport {LoaderOptions} from \"./loader-options\";\n\n@NgModule({\n    declarations: [Loader],\n    imports: [IntlModule, IonicModule, CommonModule],\n    exports: [Loader],\n    entryComponents: [Loader],\n    providers: [LoaderController]\n})\nexport class LoaderModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}