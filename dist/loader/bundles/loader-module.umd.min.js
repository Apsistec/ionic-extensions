!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/common"),require("@angular/core"),require("@co.mmons/angular-intl"),require("@ionic/angular"),require("@co.mmons/js-utils/core")):"function"==typeof define&&define.amd?define("@co.mmons/ionic-extensions/loader",["exports","@angular/common","@angular/core","@co.mmons/angular-intl","@ionic/angular","@co.mmons/js-utils/core"],n):n(((e=e||self).co=e.co||{},e.co.mmons=e.co.mmons||{},e.co.mmons["ionic-extensions"]=e.co.mmons["ionic-extensions"]||{},e.co.mmons["ionic-extensions"].loader={}),e.ng.common,e.ng.core,e.angularIntl,e.angular,e.core$1)}(this,(function(e,n,t,o,r,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function s(e,n,t,o){var r,i=arguments.length,s=i<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,t,o);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(s=(i<3?r(s):i>3?r(n,t,s):r(n,t))||s);return i>3&&s&&Object.defineProperty(n,t,s),s}function p(e,n){var t,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function p(i){return function(p){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,p])}}}var a=function(){function e(e){this.elementRef=e,this.progressType="determinate",this.progressValue=0,this.progressBuffer=0}return Object.defineProperty(e.prototype,"progressPercentVisible",{get:function(){return"number"==typeof this.progressPercent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spinnerMode",{get:function(){return"spinner"===this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progressMode",{get:function(){return"progress"===this.mode},enumerable:!0,configurable:!0}),e.prototype.dismiss=function(){return this.popover.dismiss()},e.prototype.ngOnInit=function(){this.popover=this.elementRef.nativeElement.closest("ion-popover"),this.instanceCallback&&this.instanceCallback(this)},e.prototype.ngOnDestroy=function(){this.popover=void 0,this.instanceCallback=void 0},e.ctorParameters=function(){return[{type:t.ElementRef}]},s([t.Input()],e.prototype,"instanceCallback",void 0),s([t.Input()],e.prototype,"header",void 0),s([t.Input()],e.prototype,"message",void 0),s([t.Input()],e.prototype,"mode",void 0),s([t.Input()],e.prototype,"progressMessage",void 0),s([t.Input()],e.prototype,"progressType",void 0),s([t.Input()],e.prototype,"progressValue",void 0),s([t.Input()],e.prototype,"progressBuffer",void 0),s([t.Input()],e.prototype,"progressPercent",void 0),e=s([t.Component({selector:"ionx-loader",template:'<div style="display: flex; align-items: center">\n\n    <div *ngIf="spinnerMode" style="padding: 16px; padding-right: 0px;">\n        <ion-spinner></ion-spinner>\n    </div>\n\n    <div style="padding: 16px; flex: 1; display: flex; flex-direction: column; justify-items: center;">\n        <h5 style="margin: 0px" *ngIf="header">{{header}}</h5>\n        <ion-text [innerHTML]="message" *ngIf="!!message"></ion-text>\n    </div>\n\n</div>\n\n<ion-progress-bar style="margin: 8px 0px 16px 0px" [value]="progressValue" [type]="progressType" [buffer]="progressBuffer" *ngIf="progressMode"></ion-progress-bar>\n\n<div style="display: flex; margin: 0px 16px 16px 16px" *ngIf="!!progressMessage || progressPercentVisible">\n    <ion-text [innerHTML]="progressMessage" style="flex: 1"></ion-text>\n    <span style="width: 60px; text-align: right" *ngIf="progressPercentVisible">{{(progressPercent | intlPercentFormat: {maximumFractionDigits: 0})}}</span>\n</div>\n',styles:[":host { display: block }"]})],e)}(),l=function(){function e(e){this.popoverController=e}return e.prototype.present=function(e){return n=this,t=void 0,r=function(){var n,t;return p(this,(function(o){switch(o.label){case 0:return t=function(e){return n=e},[4,this.popoverController.create({animated:!1,cssClass:"ionx-popover-flex",backdropDismiss:!1,keyboardClose:!1,component:a,componentProps:Object.assign({mode:"spinner"},e,{instanceCallback:function(e){return t(e)}})})];case 1:return o.sent().present(),[4,i.waitTill((function(){return!!n}))];case 2:return o.sent(),[2,n]}}))},new((o=void 0)||(o=Promise))((function(e,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function p(e){try{a(r.throw(e))}catch(e){i(e)}}function a(n){n.done?e(n.value):new o((function(e){e(n.value)})).then(s,p)}a((r=r.apply(n,t||[])).next())}));var n,t,o,r},e.ctorParameters=function(){return[{type:r.PopoverController}]},e=s([t.Injectable()],e)}(),c=function(){function e(){}return e=s([t.NgModule({declarations:[a],imports:[o.IntlModule,r.IonicModule,n.CommonModule],exports:[a],entryComponents:[a],providers:[l]})],e)}();e.Loader=a,e.LoaderController=l,e.LoaderModule=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=loader-module.umd.min.js.map