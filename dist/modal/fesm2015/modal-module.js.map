{"version":3,"file":"modal-module.js","sources":["ng://@co.mmons/ionic-extensions/modal/modal-controller.ts","ng://@co.mmons/ionic-extensions/modal/index.ts","ng://@co.mmons/ionic-extensions/modal/modal-module.ts"],"sourcesContent":["import {Component, EventEmitter, Input, Output, TemplateRef, ViewChild} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\n\n@Component({\n    selector: \"ionx-modal-controller\",\n    template: `\n        <ng-template #modalContent>\n            <ng-content></ng-content>\n        </ng-template>\n    `\n})\nexport class ModalControllerComponent {\n\n    constructor(private controller: ModalController) {\n    }\n\n    @Input()\n    private cssClass: string;\n\n    @Input()\n    private backdropDismiss: boolean;\n\n    @Input()\n    private showBackdrop: boolean;\n\n    @ViewChild(\"modalContent\", {static: true})\n    private content: TemplateRef<any>;\n\n    @Output()\n    public readonly willEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didDismiss: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly willDismiss: EventEmitter<any> = new EventEmitter();\n\n    private modal: HTMLIonModalElement;\n\n    public async present() {\n\n        // already opened - should we close existing and open new?\n        if (this.modal) {\n            return;\n        }\n        \n        this.modal = (await this.controller.create({component: ModalControllerContentComponent, componentProps: {template: this.content}, backdropDismiss: this.backdropDismiss, showBackdrop: this.showBackdrop, cssClass: this.cssClass}));\n\n        this.willEnter.next();\n\n        await this.modal.present();\n\n        this.didEnter.next();\n\n        this._presented = true;\n\n        if (await this.modal.onWillDismiss()) {\n            this.willDismiss.next();\n        }\n\n        if (await this.modal.onDidDismiss()) {\n            this.didDismiss.next();\n            this.modal = undefined;\n            this._presented = false;\n        }\n    }\n\n    private _presented: boolean = false;\n\n    public get presented() {\n        return this._presented;\n    }\n\n    public dismiss(data?: any, role?: any): Promise<any> {\n\n        if (this.modal) {\n            return this.modal.dismiss(data, role);\n        }\n\n        return new Promise((resolve, reject) => {\n            resolve();\n        });\n    }\n\n}\n\n@Component({\n    template: `\n        <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n    `\n})\nexport class ModalControllerContentComponent {\n\n    constructor() {\n        //this.template = params.get(\"template\");\n    }\n\n    template: TemplateRef<any>;\n\n    ngOnDestroy() {\n        this.template = undefined;\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\n\nimport {ModalControllerComponent, ModalControllerContentComponent} from \"./modal-controller\";\n\nexport {ModalControllerComponent} from \"./modal-controller\";\n\n@NgModule({\n    declarations: [ModalControllerComponent, ModalControllerContentComponent],\n    exports: [ModalControllerComponent],\n    imports: [CommonModule, IonicModule],\n    entryComponents: [ModalControllerComponent, ModalControllerContentComponent]\n})\nexport class ModalModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ModalControllerContentComponent as Éµa} from './modal-controller';"],"names":[],"mappings":"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"}