{"version":3,"file":"modal-module.js","sources":["ng://@co.mmons/ionic-extensions/modal/modal-controller.ts","ng://@co.mmons/ionic-extensions/modal/index.ts","ng://@co.mmons/ionic-extensions/modal/modal-module.ts"],"sourcesContent":["import {Component, EventEmitter, Input, Output, TemplateRef, ViewChild} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\n\n@Component({\n    selector: \"ionx-modal-controller\",\n    template: `\n        <ng-template #modalContent>\n            <ng-content></ng-content>\n        </ng-template>\n    `\n})\nexport class ModalControllerComponent {\n\n    constructor(private controller: ModalController) {\n    }\n\n    @Input()\n    private cssClass: string;\n\n    @Input()\n    private backdropDismiss: boolean;\n\n    @Input()\n    private showBackdrop: boolean;\n\n    @ViewChild(\"modalContent\", {static: true})\n    private content: TemplateRef<any>;\n\n    @Output()\n    public readonly willEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didEnter: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly didDismiss: EventEmitter<any> = new EventEmitter();\n\n    @Output()\n    public readonly willDismiss: EventEmitter<any> = new EventEmitter();\n\n    private modal: HTMLIonModalElement;\n\n    public async present() {\n\n        // already opened - should we close existing and open new?\n        if (this.modal) {\n            return;\n        }\n        \n        this.modal = (await this.controller.create({component: ModalControllerContentComponent, componentProps: {template: this.content}, backdropDismiss: this.backdropDismiss, showBackdrop: this.showBackdrop, cssClass: this.cssClass}));\n\n        this.willEnter.next();\n\n        await this.modal.present();\n\n        this.didEnter.next();\n\n        this._presented = true;\n\n        if (await this.modal.onWillDismiss()) {\n            this.willDismiss.next();\n        }\n\n        if (await this.modal.onDidDismiss()) {\n            this.didDismiss.next();\n            this.modal = undefined;\n            this._presented = false;\n        }\n    }\n\n    private _presented: boolean = false;\n\n    public get presented() {\n        return this._presented;\n    }\n\n    public dismiss(data?: any, role?: any): Promise<any> {\n\n        if (this.modal) {\n            return this.modal.dismiss(data, role);\n        }\n\n        return new Promise((resolve, reject) => {\n            resolve();\n        });\n    }\n\n}\n\n@Component({\n    template: `\n        <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n    `\n})\nexport class ModalControllerContentComponent {\n\n    constructor() {\n        //this.template = params.get(\"template\");\n    }\n\n    template: TemplateRef<any>;\n\n    ngOnDestroy() {\n        this.template = undefined;\n    }\n}\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IonicModule} from \"@ionic/angular\";\n\nimport {ModalControllerComponent, ModalControllerContentComponent} from \"./modal-controller\";\n\nexport {ModalControllerComponent} from \"./modal-controller\";\n\n@NgModule({\n    declarations: [ModalControllerComponent, ModalControllerContentComponent],\n    exports: [ModalControllerComponent],\n    imports: [CommonModule, IonicModule],\n    entryComponents: [ModalControllerComponent, ModalControllerContentComponent]\n})\nexport class ModalModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ModalControllerContentComponent as Éµa} from './modal-controller';"],"names":[],"mappings":"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"}