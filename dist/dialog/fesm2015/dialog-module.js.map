{"version":3,"file":"dialog-module.js","sources":["ng://@co.mmons/ionic-extensions/dialog/dialog.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-buttons.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-content.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-controller.ts","ng://@co.mmons/ionic-extensions/dialog/index.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-module.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    ComponentFactoryResolver,\n    ComponentRef,\n    ElementRef,\n    EventEmitter,\n    Injector,\n    Input,\n    OnDestroy,\n    OnInit,\n    Type,\n    ViewChild,\n    ViewContainerRef\n} from \"@angular/core\";\nimport {DialogButton} from \"./dialog-button\";\nimport {DialogOptions} from \"./dialog-options\";\n\n@Component({\n    selector: \"ionx-dialog\",\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    templateUrl: \"dialog.html\",\n    styleUrls: [\"dialog.scss\"]\n})\nexport class Dialog implements OnInit, OnDestroy, DialogOptions {\n\n    constructor(\n        public elementRef: ElementRef<HTMLElement>,\n        protected resolver: ComponentFactoryResolver,\n        protected injector: Injector\n    ) {}\n\n    readonly didLoad: EventEmitter<any> = new EventEmitter();\n\n    value: () => any;\n\n    @Input()\n    message: string | Type<any> | [Type<any>, {[param: string]: any}];\n\n    @Input()\n    header: string;\n\n    @Input()\n    buttons: DialogButton[];\n\n    @ViewChild(\"bodyContainer\", {read: ViewContainerRef, static: true})\n    private bodyContainer: ViewContainerRef;\n\n    bodyComponent: ComponentRef<any>;\n\n    @Input()\n    set body(body: Type<any> | [Type<any>, {[param: string]: any}]) {\n\n        if (body) {\n\n            this.bodyContainer.clear();\n\n            let type: Type<any>;\n            let params: {[param: string]: any};\n\n            if (Array.isArray(body)) {\n                type = body.length >= 1 ? body[0] : undefined;\n                params = body.length >= 2 ? body[1] : undefined;\n            } else {\n                type = body;\n            }\n\n            const componentRef = this.resolver.resolveComponentFactory(type).create(this.injector);\n\n            if (params) {\n                for (const param of Object.keys(params)) {\n                    componentRef.instance[param] = params[param];\n                }\n            }\n\n            this.bodyComponent = componentRef;\n            this.bodyContainer.insert(this.bodyComponent.hostView);\n        }\n\n    }\n\n    ngOnInit(): void {\n        const modal = this.elementRef.nativeElement.closest(\"ion-modal\");\n\n        modal.style.setProperty(\"--width\", \"300px\");\n        modal.style.setProperty(\"--height\", \"auto\");\n        modal.style.setProperty(\"--max-width\", \"90%\");\n        modal.style.setProperty(\"--max-height\", \"90%\");\n\n        if (document.querySelector(\"html.ios\")) {\n            modal.style.setProperty(\"--border-radius\", \"10px\");\n        } else {\n            modal.style.setProperty(\"--border-radius\", \"4px\");\n            modal.style.setProperty(\"--box-shadow\", \"0 28px 48px rgba(0,0,0,0.4)\");\n        }\n    }\n\n    ngOnDestroy() {\n\n        if (this.bodyComponent) {\n            // this.bodyComponent.instance[dialogInstance] = undefined;\n            this.bodyComponent.destroy();\n        }\n\n        this.value = undefined;\n    }\n\n    ionViewDidEnter() {\n        const input = this.elementRef.nativeElement.querySelector(\"input\");\n        if (input) {\n            input.focus();\n        }\n    }\n}\n","import {Component, Injector, Input} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\nimport {Dialog} from \"./dialog\";\nimport {DialogButton} from \"./dialog-button\";\n\n/**\n * Komponent, który strukturyzuje widok dialogu.\n */\n@Component({\n    selector: \"ionx-dialog-buttons\",\n    styleUrls: [\"dialog-buttons.scss\"],\n    templateUrl: \"dialog-buttons.html\"\n})\nexport class DialogButtons {\n\n    constructor(private injector: Injector, private modalController: ModalController) {\n    }\n\n    @Input()\n    buttons: DialogButton[];\n\n    /*private*/ buttonClicked(button: DialogButton) {\n\n        const dialog = this.injector.get(Dialog);\n        const value = dialog && dialog.value && dialog.value();\n\n        if (button.handler) {\n            const res = button.handler(value);\n\n            if ((typeof res === \"boolean\" && res) || typeof res !== \"boolean\") {\n                this.modalController.dismiss(value, button.role);\n            }\n\n            return;\n\n        } else {\n            this.modalController.dismiss(button.role !== \"cancel\" ? value : undefined, button.role);\n        }\n    }\n}\n","import {Component, ComponentFactoryResolver, ComponentRef, Injector, Input, Type, ViewChild, ViewContainerRef} from \"@angular/core\";\nimport {DomSanitizer, SafeHtml} from \"@angular/platform-browser\";\nimport {TypeAndProps} from \"./type-and-props\";\n\n/**\n * Komponent, który strukturyzuje widok dialogu.\n */\n@Component({\n    selector: \"ionx-dialog-content\",\n    styleUrls: [\"dialog-content.scss\"],\n    templateUrl: \"dialog-content.html\"\n})\nexport class DialogContent {\n\n    constructor(private sanitizer: DomSanitizer, private resolver: ComponentFactoryResolver, private injector: Injector) {\n    }\n\n\n    @Input()\n    header: string;\n\n    messageText: SafeHtml;\n\n    messageComponent: ComponentRef<any>;\n\n    @ViewChild(\"messageComponentContainer\", {read: ViewContainerRef, static: true})\n    private messageComponentContainer: ViewContainerRef;\n\n    @Input()\n    set message(message: string | Type<any> | TypeAndProps<any>) {\n\n        if (typeof message === \"string\") {\n            this.messageText = this.sanitizer.bypassSecurityTrustHtml(message);\n\n            if (this.messageComponent) {\n                this.messageComponent.destroy();\n            }\n\n            this.messageComponent = undefined;\n\n        } else if (message) {\n            this.messageText = undefined;\n\n            this.messageComponentContainer.clear();\n\n            let type: Type<any>;\n            let params: {[param: string]: any};\n\n            if (Array.isArray(message)) {\n                type = message.length >= 1 ? message[0] : undefined;\n                params = message.length >= 2 ? message[1] : undefined;\n            } else {\n                type = message;\n            }\n\n            const componentRef = this.resolver.resolveComponentFactory(type).create(this.injector);\n\n            if (params) {\n                for (const param of Object.keys(params)) {\n                    componentRef.instance[param] = params[param];\n                }\n            }\n\n            this.messageComponent = componentRef;\n            this.messageComponentContainer.insert(this.messageComponent.hostView);\n        }\n\n    }\n\n    ngOnDestroy(): void {\n\n        if (this.messageComponent) {\n            this.messageComponent.destroy();\n        }\n    }\n}\n","import {Injectable} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\nimport {Dialog} from \"./dialog\";\nimport {DialogOptions} from \"./dialog-options\";\n\n@Injectable()\nexport class DialogController {\n\n    constructor(protected modalController: ModalController) {\n    }\n\n    async create(options: DialogOptions) {\n\n        return this.modalController.create(Object.assign({}, options, {\n            component: Dialog,\n            componentProps: {\n                body: options.body,\n                header: options.header,\n                message: options.message,\n                buttons: options.buttons\n            }\n        }));\n    }\n\n    /**\n     * When `id` is not provided, it dismisses the top overlay.\n     */\n    dismiss(data?: any, role?: string, id?: string) {\n        return this.modalController.dismiss(data, role, id);\n    }\n\n}\n\n\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {ButtonsModule} from \"@co.mmons/ionic-extensions/buttons\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {Dialog} from \"./dialog\";\nimport {DialogButtons} from \"./dialog-buttons\";\nimport {DialogContent} from \"./dialog-content\";\nimport {DialogController} from \"./dialog-controller\";\n\nexport {Dialog} from \"./dialog\";\nexport {DialogButton} from \"./dialog-button\";\nexport {DialogController} from \"./dialog-controller\";\nexport {DialogButtons} from \"./dialog-buttons\";\nexport {DialogContent} from \"./dialog-content\";\n\n@NgModule({\n    declarations: [Dialog, DialogContent, DialogButtons],\n    imports: [IntlModule, IonicModule, CommonModule, ButtonsModule],\n    exports: [DialogContent, DialogButtons],\n    entryComponents: [Dialog],\n    providers: [DialogController]\n})\nexport class DialogModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}