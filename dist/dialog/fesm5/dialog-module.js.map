{"version":3,"file":"dialog-module.js","sources":["ng://@co.mmons/ionic-extensions/dialog/dialog.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-buttons.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-content.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-controller.ts","ng://@co.mmons/ionic-extensions/dialog/index.ts","ng://@co.mmons/ionic-extensions/dialog/dialog-module.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    ComponentFactoryResolver,\n    ComponentRef,\n    ElementRef,\n    EventEmitter,\n    Injector,\n    Input,\n    OnDestroy,\n    OnInit,\n    Type,\n    ViewChild,\n    ViewContainerRef\n} from \"@angular/core\";\nimport {DialogButton} from \"./dialog-button\";\nimport {TypeAndProps} from \"./type-and-props\";\n\n@Component({\n    selector: \"ionx-dialog\",\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    templateUrl: \"dialog.html\",\n    styleUrls: [\"dialog.scss\"]\n})\nexport class Dialog implements OnInit, OnDestroy {\n\n    constructor(\n        public elementRef: ElementRef<HTMLElement>,\n        protected resolver: ComponentFactoryResolver,\n        protected injector: Injector\n    ) {}\n\n    readonly didLoad: EventEmitter<any> = new EventEmitter();\n\n    value: () => any;\n\n    @Input()\n    message: string | Type<any> | TypeAndProps<any>;\n\n    @Input()\n    header: string;\n\n    @Input()\n    buttons: DialogButton[];\n\n    @ViewChild(\"componentContainer\", {read: ViewContainerRef, static: true})\n    private componentContainer: ViewContainerRef;\n\n    /* private */ componentRef: ComponentRef<any>;\n\n    @Input()\n    set component(component: Type<any> | [Type<any>, {[param: string]: any}]) {\n\n        if (component) {\n\n            this.componentContainer.clear();\n\n            let type: Type<any>;\n            let params: {[param: string]: any};\n\n            if (Array.isArray(component)) {\n                type = component.length >= 1 ? component[0] : undefined;\n                params = component.length >= 2 ? component[1] : undefined;\n            } else {\n                type = component;\n            }\n\n            const componentRef = this.resolver.resolveComponentFactory(type).create(this.injector);\n\n            if (params) {\n                for (const param of Object.keys(params)) {\n                    componentRef.instance[param] = params[param];\n                }\n            }\n\n            this.componentRef = componentRef;\n            this.componentContainer.insert(this.componentRef.hostView);\n        }\n\n    }\n\n    ngOnInit(): void {\n        const modal = this.elementRef.nativeElement.closest(\"ion-modal\");\n\n        modal.style.setProperty(\"--width\", \"300px\");\n        modal.style.setProperty(\"--height\", \"auto\");\n        modal.style.setProperty(\"--max-width\", \"90%\");\n        modal.style.setProperty(\"--max-height\", \"90%\");\n\n        if (document.querySelector(\"html.ios\")) {\n            modal.style.setProperty(\"--border-radius\", \"10px\");\n        } else {\n            modal.style.setProperty(\"--border-radius\", \"4px\");\n            modal.style.setProperty(\"--box-shadow\", \"0 28px 48px rgba(0,0,0,0.4)\");\n        }\n    }\n\n    ngOnDestroy() {\n\n        if (this.componentRef) {\n            this.componentRef.destroy();\n        }\n\n        this.value = undefined;\n    }\n\n    ionViewDidEnter() {\n        const input = this.elementRef.nativeElement.querySelector(\"input\");\n        if (input) {\n            input.focus();\n        }\n    }\n}\n","import {Component, Injector, Input} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\nimport {Dialog} from \"./dialog\";\nimport {DialogButton} from \"./dialog-button\";\n\n/**\n * Komponent, który strukturyzuje widok dialogu.\n */\n@Component({\n    selector: \"ionx-dialog-buttons\",\n    styleUrls: [\"dialog-buttons.scss\"],\n    templateUrl: \"dialog-buttons.html\"\n})\nexport class DialogButtons {\n\n    constructor(private injector: Injector, private modalController: ModalController) {\n    }\n\n    @Input()\n    buttons: DialogButton[];\n\n    /*private*/ buttonClicked(button: DialogButton) {\n\n        const dialog = this.injector.get(Dialog);\n        const value = dialog && dialog.value && dialog.value();\n\n        if (button.handler) {\n            const res = button.handler(value);\n\n            if ((typeof res === \"boolean\" && res) || typeof res !== \"boolean\") {\n                this.modalController.dismiss(value, button.role);\n            }\n\n            return;\n\n        } else {\n            this.modalController.dismiss(button.role !== \"cancel\" ? value : undefined, button.role);\n        }\n    }\n}\n","import {Component, ComponentFactoryResolver, ComponentRef, Injector, Input, Type, ViewChild, ViewContainerRef} from \"@angular/core\";\nimport {DomSanitizer, SafeHtml} from \"@angular/platform-browser\";\nimport {TypeAndProps} from \"./type-and-props\";\n\n/**\n * Komponent, który strukturyzuje widok dialogu.\n */\n@Component({\n    selector: \"ionx-dialog-content\",\n    styleUrls: [\"dialog-content.scss\"],\n    templateUrl: \"dialog-content.html\"\n})\nexport class DialogContent {\n\n    constructor(private sanitizer: DomSanitizer, private resolver: ComponentFactoryResolver, private injector: Injector) {\n    }\n\n\n    @Input()\n    header: string;\n\n    messageText: SafeHtml;\n\n    messageComponent: ComponentRef<any>;\n\n    @ViewChild(\"messageComponentContainer\", {read: ViewContainerRef, static: true})\n    private messageComponentContainer: ViewContainerRef;\n\n    @Input()\n    set message(message: string | Type<any> | TypeAndProps<any>) {\n\n        if (typeof message === \"string\") {\n            this.messageText = this.sanitizer.bypassSecurityTrustHtml(message);\n\n            if (this.messageComponent) {\n                this.messageComponent.destroy();\n            }\n\n            this.messageComponent = undefined;\n\n        } else if (message) {\n            this.messageText = undefined;\n\n            this.messageComponentContainer.clear();\n\n            let type: Type<any>;\n            let params: {[param: string]: any};\n\n            if (Array.isArray(message)) {\n                type = message.length >= 1 ? message[0] : undefined;\n                params = message.length >= 2 ? message[1] : undefined;\n            } else {\n                type = message;\n            }\n\n            const componentRef = this.resolver.resolveComponentFactory(type).create(this.injector);\n\n            if (params) {\n                for (const param of Object.keys(params)) {\n                    componentRef.instance[param] = params[param];\n                }\n            }\n\n            this.messageComponent = componentRef;\n            this.messageComponentContainer.insert(this.messageComponent.hostView);\n        }\n\n    }\n\n    ngOnDestroy(): void {\n\n        if (this.messageComponent) {\n            this.messageComponent.destroy();\n        }\n    }\n}\n","import {Injectable} from \"@angular/core\";\nimport {ModalController} from \"@ionic/angular\";\nimport {Dialog} from \"./dialog\";\nimport {DialogOptions} from \"./dialog-options\";\n\n@Injectable()\nexport class DialogController {\n\n    constructor(protected modalController: ModalController) {\n    }\n\n    async create(options: DialogOptions) {\n\n        return this.modalController.create(Object.assign({}, options, {\n            component: Dialog,\n            componentProps: {\n                component: options.component,\n                header: options.header,\n                message: options.message,\n                buttons: options.buttons\n            },\n            leaveAnimation: () => null\n        }));\n    }\n\n    /**\n     * When `id` is not provided, it dismisses the top overlay.\n     */\n    dismiss(data?: any, role?: string, id?: string) {\n        return this.modalController.dismiss(data, role, id);\n    }\n\n}\n\n\n","import {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {IntlModule} from \"@co.mmons/angular-intl\";\nimport {ButtonsModule} from \"@co.mmons/ionic-extensions/buttons\";\nimport {IonicModule} from \"@ionic/angular\";\nimport {Dialog} from \"./dialog\";\nimport {DialogButtons} from \"./dialog-buttons\";\nimport {DialogContent} from \"./dialog-content\";\nimport {DialogController} from \"./dialog-controller\";\n\nexport {Dialog} from \"./dialog\";\nexport {DialogButton} from \"./dialog-button\";\nexport {DialogController} from \"./dialog-controller\";\nexport {DialogButtons} from \"./dialog-buttons\";\nexport {DialogContent} from \"./dialog-content\";\n\n@NgModule({\n    declarations: [Dialog, DialogContent, DialogButtons],\n    imports: [IntlModule, IonicModule, CommonModule, ButtonsModule],\n    exports: [DialogContent, DialogButtons],\n    entryComponents: [Dialog],\n    providers: [DialogController]\n})\nexport class DialogModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}